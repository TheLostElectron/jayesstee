{"version":3,"sources":["../src/jayesstee.chart.js"],"names":["JstChart","optsAndData","initialOptsAndData","$div","cn","$canvas","ref","chartContext","chartCanvas","el","getContext","chart","update","opts","options","refresh","label","dataset","index","labels","indexOf","datasets","splice","push","Object"],"mappings":"u2BAAA,oC,mDACA,+B,gIAEaA,S,SAAAA,Q,oEAQX,kBAAYC,WAAZ,CAAyB,6KAEvB,MAAKC,kBAAL,CAA0BD,WAA1B,CAFuB,YAGxB,C,yEAEQ,CACP,MAAO,qBAAIE,IAAJ,CAAS,CAACC,GAAI,QAAL,CAAT,CACS,oBAAIC,OAAJ,CAAY,CAACC,IAAK,aAAN,CAAZ,CADT,CAGR,C,+CAEY,CACX,GAAIC,cAAe,KAAKC,WAAL,CAAiBC,EAAjB,CAAoBC,UAApB,CAA+B,IAA/B,CAAnB,CACA,GAAI,KAAKC,KAAT,CAAgB,CACd,KAAKA,KAAL,CAAWC,MAAX,EACD,CAFD,IAGK,CACH,KAAKD,KAAL,CAAa,oBAAUJ,YAAV,CACU,KAAKL,kBADf,CAAb,CAEA,MAAO,MAAKA,kBACb,CACF,C,oDAGaW,I,CAAM,CAClB,KAAKF,KAAL,CAAWG,OAAX,CAAqB,qBAAc,KAAKH,KAAL,CAAWG,OAAzB,CAAkCD,IAAlC,CAArB,CACA,KAAKE,OAAL,EACD,C,8CAGUF,I,CAAM,CACf,KAAKF,KAAL,CAAWG,OAAX,CAAqBD,IAArB,CACA,KAAKE,OAAL,EACD,C,oDAKaC,K,CAAOC,O,CAAS,CAC5B,GAAIC,OAAQ,KAAKP,KAAL,CAAWQ,MAAX,CAAkBC,OAAlB,CAA0BJ,KAA1B,CAAZ,CACA,GAAIE,OAAS,CAAb,CAAgB,CACd,KAAKP,KAAL,CAAWU,QAAX,CAAoBH,KAApB,EAA6BD,OAA7B,CACA,KAAKF,OAAL,EACD,CACF,C,oDAKaC,K,CAAO,CACnB,GAAIE,OAAQ,KAAKP,KAAL,CAAWQ,MAAX,CAAkBC,OAAlB,CAA0BJ,KAA1B,CAAZ,CACA,GAAIE,OAAS,CAAb,CAAgB,CACd,KAAKP,KAAL,CAAWU,QAAX,CAAoBC,MAApB,CAA2BJ,KAA3B,CAAkC,CAAlC,EACA,KAAKP,KAAL,CAAWQ,MAAX,CAAkBG,MAAlB,CAAyBJ,KAAzB,CAAgC,CAAhC,EACA,KAAKH,OAAL,EACD,CACF,C,8CAKUC,K,CAAOC,O,CAAS,CACzB,KAAKN,KAAL,CAAWU,QAAX,CAAoBE,IAApB,CAAyBN,OAAzB,EACA,KAAKN,KAAL,CAAWK,KAAX,CAAiBO,IAAjB,CAAsBP,KAAtB,CACD,C,qBAxE2B,oBAAIQ,M","file":"jayesstee.chart.js","sourcesContent":["import jst   from \"jayesstee\";\nimport Chart from \"chart.js\";\n\nexport class JstChart extends jst.Object {\n  // The options for the this class are the same as\n  // those that would be specified for chartjs (www.chartjs.org):\n  // {\n  //   type:     <type of chart>,\n  //   data:     { datasets and labels },\n  //   options:  { options from chartjs }\n  // }\n  constructor(optsAndData) {\n    super();\n    this.initialOptsAndData = optsAndData;\n  }\n\n  render() {\n    return jst.$div({cn: \"-chart\"},\n                    jst.$canvas({ref: \"chartCanvas\"})\n                   );\n  }\n\n  postRender() {\n    let chartContext = this.chartCanvas.el.getContext('2d');\n    if (this.chart) {\n      this.chart.update();\n    }\n    else {\n      this.chart = new Chart(chartContext,\n                             this.initialOptsAndData);\n      delete(this.initialOptsAndData);\n    }\n  }\n\n  // Merge in the chart's options\n  updateOptions(opts) {\n    this.chart.options = Object.assign(this.chart.options, opts);\n    this.refresh();\n  }\n\n  // Just set the chart's options\n  setOptions(opts) {\n    this.chart.options = opts;\n    this.refresh();\n  }\n\n  // Update a single dataset\n  // TODO - needs a rethink - there isn't a 1-to-1 mapping\n  // between labels and datasets\n  updateDataset(label, dataset) {\n    let index = this.chart.labels.indexOf(label);\n    if (index >= 0) {\n      this.chart.datasets[index] = dataset;\n      this.refresh();\n    }\n  }\n\n  // Remove the named dataset\n  // TODO - needs a rethink - there isn't a 1-to-1 mapping\n  // between labels and datasets\n  removeDataset(label) {\n    let index = this.chart.labels.indexOf(label);\n    if (index >= 0) {\n      this.chart.datasets.splice(index, 1);\n      this.chart.labels.splice(index, 1);\n      this.refresh();\n    }\n  }\n\n  // Add a new dataset\n  // TODO - needs a rethink - there isn't a 1-to-1 mapping\n  // between labels and datasets\n  addDataset(label, dataset) {\n    this.chart.datasets.push(dataset);\n    this.chart.label.push(label);\n  }\n  \n}\n"]}