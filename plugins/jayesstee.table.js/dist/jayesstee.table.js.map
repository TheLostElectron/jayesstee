{"version":3,"sources":["../src/jayesstee.table.js"],"names":["jst","JstTable","Object","constructor","opts","assign","sortDirection","usingWorkaround","color","primary","secondary","font","tetherNonValues","debugSort","headerDefaults","type","undefined","text","sortByElement","sortFunctions","recursiveMerge","firstElm","secondElm","localeCompare","num","css","cssInstance","cssLocal","sortingenabled$c","cursor","title$c","fontSize","fontWeight","marginBottom$px","table$c","border$px","primaryColor","textAlign","borderCollapse","td$c","verticalAlign","padding$px","th$c","fontSize$px","background","thead$c","borderLeft","cssDefault","obj1","obj2","key","keys","Array","isArray","render","$div","cn","title","$table","id","renderTHead","renderTBody","renderTFoot","$thead","$tr","headings","map","heading","i","headingObj","$th","events","click","e","sortData","data","safeDescend","obj","location","tmp","column","dataArr","console","log","splitNonValues","sort","val1","val2","reverse","sortedData","concat","refresh","setTimeout","warn","values","filter","val","dataToUse","rowSpan","colOpts","reduce","acc","opt","lastCell","lastVal","$tbody","row","cell","attrs","$td","footers","$tfoot","footer"],"mappings":"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","file":"jayesstee.table.js","sourcesContent":["import {jst} from \"jayesstee\";\n\nexport class JstTable extends jst.Object {\n\tconstructor(opts) {\n\t\tsuper();\n\n\t\tthis.opts = Object.assign({}, opts);\n        this.sortDirection = {};\n\t\tthis.usingWorkaround = false; //JstRefresh: Remove\n\t\t// Set up some defaults\n\t\tthis.opts.color = this.opts.color || {};\n\t\tthis.opts.color.primary = this.opts.color.primary || \"#1C6EA4\";\n\t\tthis.opts.color.secondary = this.opts.color.secondary || \"#D0E4F5\";\n\t\tthis.opts.color.font = this.opts.color.font || \"black\";\n\t\tthis.opts.tetherNonValues = this.opts.tetherNonValues || -1;\n\t\tthis.opts.debugSort = this.opts.debugSort || false;\n\t\tthis.opts.headerDefaults = this.opts.headerDefaults || {\n\t\t\ttype: undefined,\n\t\t\ttext: undefined,\n\t\t\tsortByElement: []\n\t\t};\n\t\tthis.opts.sortFunctions = this.recursiveMerge(this.opts.sortFunctions, {\n\t\t\t\ttext: (firstElm, secondElm) => {\n\t\t\t\t\treturn firstElm.localeCompare(secondElm);\n\t\t\t\t},\n\t\t\t\tnum: (firstElm, secondElm) => {\n\t\t\t\t\treturn firstElm - secondElm;\n\t\t\t\t}\n\t\t\t});\n\t\tif (opts.css) {\n\t\t\tthis.cssInstance = () => this.opts.css;\n\t\t}\n\t}\n\n\tcssLocal() {\n\t\treturn [{\n\t\t\t\tsortingenabled$c: {\n\t\t\t\t\tcursor: \"pointer\"\n\t\t\t\t},\n\t\t\t\ttitle$c: {\n\t\t\t\t\tfontSize: \"110%\",\n\t\t\t\t\tfontWeight: \"bold\",\n\t\t\t\t\tcolor: this.opts.color.font,\n\t\t\t\t\tmarginBottom$px: 15\n\t\t\t\t},\n\t\t\t\ttable$c: {\n\t\t\t\t\tborder$px: [1, \"solid\", this.opts.primaryColor],\n\t\t\t\t\ttextAlign: \"left\",\n\t\t\t\t\tborderCollapse: \"collapse\",\n\t\t\t\t\tcolor: this.opts.color.font\n\t\t\t\t},\n\t\t\t\ttd$c: {\n\t\t\t\t\tverticalAlign: \"top\",\n\t\t\t\t\tborder$px: [1, \"solid\", \"#AAAAAA\"],\n\t\t\t\t\tpadding$px: [3, 6],\n\t\t\t\t},\n\t\t\t\tth$c: {\n\t\t\t\t\tborder$px: [1, \"solid\", \"#AAAAAA\"],\n\t\t\t\t\tpadding$px: [3, 6],\n\t\t\t\t},\n\t\t\t\t'tbody$c td$c': {\n\t\t\t\t\tfontSize$px: 13\n\t\t\t\t},\n\t\t\t\t'.tr:nth-child(even)': {\n\t\t\t\t\tbackground: this.opts.color.secondary\n\t\t\t\t},\n\t\t\t\tthead$c: {\n\t\t\t\t\tbackground: this.opts.color.primary,\n\t\t\t\t\tcolor: \"white\"\n\t\t\t\t},\n\t\t\t\t'thead$c th$c': {\n\t\t\t\t\tfontSize$px: 15,\n\t\t\t\t\tfontWeight: \"bold\",\n\t\t\t\t\tcolor: \"#FFFFFF\",\n\t\t\t\t},\n\t\t\t\t'thead$c th$c$first-child': {\n\t\t\t\t\tborderLeft: \"none\"\n\t\t\t\t},\n\n\t\t\t},\n\t\t\tthis.opts.cssDefault\n\t\t];\n\t}\n\t//Merges two objects, with preference to keys/vals of obj1.\n\t//Obj2 is used only for keys not existing in obj1. Great for setting defaults.\n\t//Arrays will not be merged. They will come from either 1 or 2, conditional on 1's existance.\n\t//Returns the merged array\n\trecursiveMerge(obj1, obj2) {\n\t\tif (!obj1) {\n\t\t\treturn obj2\n\t\t}\n\t\tfor (let key of Object.keys(obj1)) {\n\t\t\tif (typeof obj1[key] == \"object\" && !Array.isArray(obj1[key]))\n\t\t\t\tthis.recursiveMerge(obj1[key], obj2[key]);\n\t\t\telse\n\t\t\t\tif (obj1[key] == undefined)\n\t\t\t\t\tobj1[key] = obj2[key];\n\t\t}\n\t\tfor (let key of Object.keys(obj2)) {\n\t\t\tif (obj1[key] == undefined)\n\t\t\t\tobj1[key] = obj2[key];\n\t\t}\n\t\treturn obj1;\n\n\t}\n\trender() {\n\t\tif (this.usingWorkaround){//JstRefresh: Remove\n\t\t\treturn undefined;//JstRefresh: Remove\n\t\t\tthis.usingWorkaround = false;//JstRefresh: Remove\n\t\t}//JstRefresh: Remove\n\t\treturn jst.$div({\n\t\t\tcn: \"-tableContainer --tableContainer\"\n\t\t},\n\t\t\tjst.$div({\n\t\t\t\tcn: \"-title --title\"\n\t\t\t},\n\t\t\t\tthis.opts.title),\n\t\t\tjst.$table({\n\t\t\t\tid: this.opts.id,\n\t\t\t\tcn: \"--table -table\"\n\t\t\t},\n\t\t\t\tthis.renderTHead(),\n\t\t\t\tthis.renderTBody(),\n\t\t\t\tthis.renderTFoot()));\n\t}\n\trenderTHead() {\n\t\treturn jst.$thead({\n\t\t\tcn: \"-thead --thead\"\n\t\t},\n\t\t\tjst.$tr({\n\t\t\t\tcn: \"-tr --tr\"\n\t\t\t},\n\t\t\t\tthis.opts.headings.map(\n\t\t\t\t\t(heading, i) => {\n\t\t\t\t\tvar headingObj = this.recursiveMerge(heading.text ? heading : {\n\t\t\t\t\t\t\ttext: heading\n\t\t\t\t\t\t}, this.opts.headerDefaults)\n\t\t\t\t\t\treturn jst.$th({\n\t\t\t\t\t\t\tcn: \"-th --th\" + (headingObj.type !== undefined ? \" -sortingenabled\" : \"\"),\n\t\t\t\t\t\t\tevents: headingObj.type ? {\n\t\t\t\t\t\t\t\tclick: e => this.sortData(i, headingObj, this.opts.data)\n\t\t\t\t\t\t\t}: {}\n\t\t\t\t\t\t}, headingObj.text)\n\t\t\t\t})));\n\t}\n\n\tsafeDescend(obj, location) {\n\t\tlet tmp = obj\n\t\t\tfor (let key of location) {\n\t\t\t\tif (obj[key]) {\n\t\t\t\t\ttmp = obj[key]\n\t\t\t\t} else {\n\t\t\t\t\treturn undefined\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn tmp\n\t}\n\n\tsortData(column, heading, data) {\n\n\t\tif (this.opts.sortFunctions[heading.type]) {\n\t\t\tlet dataArr = []\n\t\t\tif (this.opts.debugSort)\n\t\t\t\tconsole.log(\"Sorting \" + heading.text + \" as \" + heading.type)\n\t\t\t\n\t\t\tdataArr = [[], data];\n\n\t\t\tif (this.opts.tetherNonValues)\n\t\t\t\tdataArr = this.splitNonValues(data, column, heading)\n\t\t\tif (this.opts.debugSort) {\n\t\t\t\tconsole.log(\"Pre sorted data\", dataArr[1])\n\t\t\t}\t\n\tdataArr[1] = dataArr[1].sort(\n\t\t\t\t(val1, val2) => {\n\t\t\t\t\treturn this.opts.sortFunctions[heading.type](\n\t\t\t\t\t\tthis.safeDescend(val1[column], heading.sortByElement), \n\t\t\t\t\t\tthis.safeDescend(val2[column], heading.sortByElement)\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t);\n\t\t\n\t\t\tthis.sortDirection[heading.text] = this.sortDirection[heading.text] ? false : true;\n\t\t\t\n\t\t\tif (!this.sortDirection[heading.text])\n\t\t\t\tdataArr[1].reverse();\n\t\t\t\n\t\t\tthis.sortedData = dataArr[1].concat(dataArr[0]);\n\n\t\t\tif (this.opts.debugSort) {\n\t\t\t\tconsole.log(\"Sorted data\", this.sortedData)\n\t\t\t}\n\t\t\tthis.usingWorkaround = true;\n\t\t\tthis.refresh();\n\t\t\tsetTimeout(()=>{this.usingWorkaround = false;this.refresh()}, 20) //JstRefresh: Remove\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t} else if (heading.type == undefined) {\n\t\t\tif (this.opts.debugSort) {\n\t\t\t\tconsole.warn(\"Clicked on header with no header type defined\")\n\t\t\t}\n\t\t\t\n\t\t} else {\n\t\t\tif (this.opts.debugSort) {\n\t\t\t\tconsole.warn(\"Sort hander \" + heading.type + \" (opts.heading[\" + column + \"].type) must have a matching, defined opts.sortFunction.\")\n\t\t\t}\n\t\t}\n\t}\n\t/*Returns array\n\t*First Element is null, blank or undefined data\n\t*Second is everything else\n\t*/\n\tsplitNonValues(data, column, heading) {\n\t\tlet values = [\n\t\t\tdata.filter(val => {\n\t\t\t\tval = this.safeDescend(val[column], heading.sortByElement);\n\t\t\t\treturn ((val == undefined || val == null || val == \"\") ? true : false);\n\t\t\t}),\n\t\t\tdata.filter(val => {\n\t\t\t\tval = this.safeDescend(val[column], heading.sortByElement);\n\t\t\t\treturn ((val == undefined || val == null || val == \"\") ? false : true);\n\t\t\t})\n\t\t];\n\t\treturn values;\n\t}\n\n\trenderTBody() {\n\n\t\tvar dataToUse = [];\n\t\tif (this.sortedData)\n\t\t\t\tdataToUse = this.sortedData;\n\t\telse\n\t\t\t   dataToUse = this.opts.data\n\t\tlet rowSpan = false;\n\t\t\n\t\tif (this.opts.colOpts) {\n\t\t\trowSpan = this.opts.colOpts.reduce((acc, opt) => acc || opt.rowSpan, false);\n\t\t}\n\t\tif (rowSpan) {\n\t\t\tlet lastCell = [];\n\t\t\tlet lastVal = [];\n\n\t\t\treturn jst.$tbody({\n\t\t\t\tcn: \"-tbody --tbody\"\n\t\t\t},\n\t\t\t\tdataToUse.map(\n\t\t\t\t\trow => {\n\t\t\t\t\treturn jst.$tr({\n\t\t\t\t\t\tcn: \"-tr --tr\"\n\t\t\t\t\t},\n\t\t\t\t\t\trow.map((cell, i) => {\n\t\t\t\t\t\t\tif (this.opts.colOpts[i] && this.opts.colOpts[i].rowSpan) {\n\t\t\t\t\t\t\t\tif (typeof(cell) !== \"undefined\" && lastVal[i] === cell) {\n\t\t\t\t\t\t\t\t\tlastCell[i].attrs.rowSpan++;\n\t\t\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlastCell[i] = jst.$td({\n\t\t\t\t\t\t\t\t\t\t\tcn: \"-td --td\",\n\t\t\t\t\t\t\t\t\t\t\trowSpan: 1\n\t\t\t\t\t\t\t\t\t\t}, cell);\n\t\t\t\t\t\t\t\t\tlastVal[i] = cell;\n\t\t\t\t\t\t\t\t\treturn lastCell[i];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\treturn jst.$td({\n\t\t\t\t\t\t\t\t\tcn: \"-td --td\"\n\t\t\t\t\t\t\t\t}, cell);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}))\n\t\t\t\t}));\n\t\t} else {\n\t\t\treturn jst.$tbody({\n\t\t\t\tcn: \"-tbody --tbody\"\n\t\t\t},\n\t\t\t\tdataToUse.map(\n\t\t\t\t\trow => jst.$tr({\n\t\t\t\t\t\tcn: \"-tr --tr\"\n\t\t\t\t\t},\n\t\t\t\t\t\trow.map(\n\t\t\t\t\t\t\t(cell) => {\n\t\t\t\t\t\t\treturn jst.$td({\n\t\t\t\t\t\t\t\tcn: \"-td --td\"\n\t\t\t\t\t\t\t}, cell)\n\t\t\t\t\t\t}))));\n\t\t}\n\t}\n\n\trenderTFoot() {\n\t\tif (this.opts.footers) {\n\t\t\treturn jst.$tfoot({\n\t\t\t\tcn: \"-tfoot --tfoot\"\n\t\t\t},\n\t\t\t\tjst.$tr({\n\t\t\t\t\tcn: \"-tr --tr\"\n\t\t\t\t},\n\t\t\t\t\tthis.opts.footers.map(footer => jst.$td({\n\t\t\t\t\t\t\tcn: \"-td --td\"\n\t\t\t\t\t\t}, footer))));\n\t\t}\n\t\treturn undefined;\n\t}\n\n}\n"]}
