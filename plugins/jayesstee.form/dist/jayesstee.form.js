"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.JstForm=undefined;var _keys=require("babel-runtime/core-js/object/keys");var _keys2=_interopRequireDefault(_keys);var _getIterator2=require("babel-runtime/core-js/get-iterator");var _getIterator3=_interopRequireDefault(_getIterator2);var _getPrototypeOf=require("babel-runtime/core-js/object/get-prototype-of");var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=require("babel-runtime/helpers/classCallCheck");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require("babel-runtime/helpers/createClass");var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require("babel-runtime/helpers/possibleConstructorReturn");var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require("babel-runtime/helpers/inherits");var _inherits3=_interopRequireDefault(_inherits2);var _assign=require("babel-runtime/core-js/object/assign");var _assign2=_interopRequireDefault(_assign);var _jayesstee=require("jayesstee");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var templates={field:function field(_field){return _jayesstee.jst.$div({cn:"-field-container"},templates[_field.type]?templates[_field.type](_field):templates.input(_field))},input:function input(field){return _jayesstee.jst.$fieldset(_jayesstee.jst.$label({cn:"-label"},field.label),_jayesstee.jst.$input((0,_assign2.default)({type:field.type?field.type:"text"},field.attrs)))},password:function password(field){return _jayesstee.jst.$fieldset(_jayesstee.jst.$label({cn:"-label"},field.label),_jayesstee.jst.$input((0,_assign2.default)({type:"password",name:field.name},field.attrs)))},checkbox:function checkbox(field){return _jayesstee.jst.$fieldset(field.legend?_jayesstee.jst.$legend(field.legend):undefined,field.label?_jayesstee.jst.$legend(field.label):undefined,field.items.map(function(item){return templates.checkboxItem(field.name,item)}))},radio:function radio(field){return _jayesstee.jst.$fieldset(field.legend?_jayesstee.jst.$legend(field.legend):undefined,field.label?_jayesstee.jst.$legend(field.label):undefined,field.items.map(function(item){return templates.radioItem(field.name,field.events,item)}))},select:function select(field){return _jayesstee.jst.$fieldset(field.label?_jayesstee.jst.$label({cn:"-label"},field.label):undefined,_jayesstee.jst.$select(field.attrs,field.items.map(function(item){return templates.selectOption(field.name,item)})))},textarea:function textarea(field){return _jayesstee.jst.$textarea(field.attrs,field.value)},radioItem:function radioItem(name,events,item){return[_jayesstee.jst.$input({cn:"-radio-item",type:"radio",id:item.id,name:name,events:events}),_jayesstee.jst.$label({cn:"-radio-item-label",for:item.id},item.text||item.value),item.noBreak?undefined:_jayesstee.jst.$br()]},checkboxItem:function checkboxItem(name,events,item){return[_jayesstee.jst.$input({type:"checkbox",id:item.id,name:name,value:item.value,events:events,properties:item.checked?["checked"]:undefined}),_jayesstee.jst.$label({cn:"-checkbox-item-label",for:item.id},item.text||item.value),item.noBreak?undefined:_jayesstee.jst.$br()]},selectOption:function selectOption(name,item){return[_jayesstee.jst.$option({cn:"-select-item",value:item.id||item.name||item.value,properties:item.checked||item.selected?["selected"]:undefined},item.text||item.name||item.id||item.value)]}};var Input=function(_jst$Object){(0,_inherits3.default)(Input,_jst$Object);function Input(opts){(0,_classCallCheck3.default)(this,Input);var _this=(0,_possibleConstructorReturn3.default)(this,(Input.__proto__||(0,_getPrototypeOf2.default)(Input)).call(this));_this.opts=opts;return _this}(0,_createClass3.default)(Input,[{key:"cssLocal",value:function cssLocal(){return{".input input":{border:["1px","solid",css.darkPrimary],padding$px:2},".input fieldset":{border:"none",borderRadius$px:3,margin$px:0},".input input[type=button]":{margin$px:5,borderRadius$px:3,padding$px:4},".input legend":{fontWeight:"bold"},".checkbox-item-label, .radio-item-label":{margin$px:[0,5]},".input input[type=checkbox], .input input[type=radio]":{marginLeft$px:8},label$c:{display:"inline-block",fontWeight:"bold",marginRight:10,minWidth$em:6}}}},{key:"render",value:function render(){return[_jayesstee.jst.$div({cn:"-input"},templates.field(this))]}}]);return Input}(_jayesstee.jst.Object);var JstForm=exports.JstForm=function(_jst$Object2){(0,_inherits3.default)(JstForm,_jst$Object2);function JstForm(opts){(0,_classCallCheck3.default)(this,JstForm);var _this2=(0,_possibleConstructorReturn3.default)(this,(JstForm.__proto__||(0,_getPrototypeOf2.default)(JstForm)).call(this));_this2.name=opts.name;_this2.events=opts.events;_this2.inputs=[];_this2.inputsByName={};_this2.createInputs(opts.inputs);return _this2}(0,_createClass3.default)(JstForm,[{key:"render",value:function render(){return _jayesstee.jst.$form({name:this.name,events:this.events},this.inputs)}},{key:"createInput",value:function createInput(opts){if(typeof opts.name=="undefined"){throw Error("opts.name must be defined on all inputs")}var input=new Input(opts);this.inputs.push(input);this.inputsByName[opts.name]=input;return input}},{key:"createInputs",value:function createInputs(inputs){var _this3=this;inputs.map(function(input){return _this3.createInput(input)})}},{key:"getValues",value:function getValues(){var vals={};var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=(0,_getIterator3.default)((0,_keys2.default)(this.inputsByName)),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var name=_step.value;vals[name]=this.inputsByName[name].getValue()}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return vals}}]);return JstForm}(_jayesstee.jst.Object);
//# sourceMappingURL=jayesstee.form.js.map