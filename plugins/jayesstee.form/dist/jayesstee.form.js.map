{"version":3,"sources":["../src/jayesstee.form.js"],"names":["defaults","color","textLight","textDark","backgroundLight","backgroundDark","highlight","font","size","family","label","position","JstForm","opts","type","typeToClass","Input","JstFormElement","jstform","form","attrs","ref","events","input","oldEvent","e","inputChanged","keydown","inputKeyDown","css","instanceCss","cssInstance","input$c","marginLeft$px","padding$px","border","borderRadius$px","margin$px","display","fontFamily","fontSize","fontWeight","minWidth$em","inputInner$c","completionList$c","backgroundColor","completionItem$c","border$px","rgba","completionItem$c$hover","cursor","selected$c","bannerSelect$c","bannerSelectItem$c","fontSize$px","localCss","renderInput","$input","completionValues","undefined","$div","cn","map","item","selected","click","completionSelect","text","inners","$fieldset","legend","inputEl","el","value","key","completionIndex","length","markCompletionValue","submit","refresh","val","list","completionChoices","word","doCompletion","curr","getValue","re","RegExp","filter","match","splice","setValue","focus","Object","InputRadioOrCheckbox","itemLabel$c","$legend","items","renderItem","name","id","$label","for","noBreak","$br","InputButton","button$c","$button","InputTextArea","textArea$c","$textarea","InputSelect","selectType","bannerChange","change","bannerClick","bannerSelectItem$c$hover","renderBannerSelectOption","$select","renderSelectOption","$option","properties","checked","bannerItemSelect","selectedItem","inputs","inputsByName","createInputs","$form","Error","optsWithRef","push","createInput","vals","select","checkbox","radio","textarea","button","date","datetime","email","file","hidden","image","month","number","password"],"mappings":"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","file":"jayesstee.form.js","sourcesContent":["import {jst}   from \"jayesstee\";\n\n// Default values that can be overrided\nconst defaults = {\n  color: {\n    textLight: \"#fff\",\n    textDark:  \"#000\",\n    backgroundLight: \"#eee\",\n    backgroundDark:  \"#555\",\n    highlight: \"#eee\"\n  },\n  font: {\n    size: \"13pt\",\n    family: \"Arial\"\n  },\n  label: {\n    position: \"top\"\n  }\n\n};\n\n\n\nclass JstForm {\n  constructor() {\n    this.defaults = defaults;\n  }\n\n  setDefaults(opts) {\n    this.defaults = Object.assign(defaults, opts);\n  }\n\n  $input(opts) {\n    if (opts.type && typeToClass[opts.type]) {\n      return new typeToClass[opts.type](this, opts);\n    }\n    else {\n      return new Input(this, opts);\n    }\n  }\n\n  $form(opts) {\n    return new JstFormElement(opts);\n  }\n   \n}\n\nexport let jstform = new JstForm();\n\n\n\nclass Input extends jst.Object {\n  constructor(form, opts) {\n    super();\n    this.defaults = form.defaults;\n    this.opts = Object.assign({attrs: {}}, opts);\n    if (opts.ref) {\n      this.opts.attrs.ref = opts.ref;\n    }\n    else {\n      this.opts.attrs.ref = \"inputEl\";\n    }\n    if (opts.events) {\n      let events = Object.assign({}, opts.events);\n      if (!opts.type || opts.type === \"text\") {\n        if (events.input) {\n          let oldEvent = events.input;\n          events.input = e => {oldEvent(e); this.inputChanged(e);};\n        }\n        else {\n          events.input = e => this.inputChanged(e);\n        }\n        if (events.keydown) {\n          let oldEvent = events.keydown;\n          events.keydown = e => {oldEvent(e); this.inputKeyDown(e);};\n        }\n        else {\n          events.keydown = e => this.inputKeyDown(e);\n        }\n      }\n      this.opts.attrs.events = events;\n    }\n    else if (!opts.type || opts.type === \"text\") {\n      this.opts.attrs.events = {\n        input:   e => this.inputChanged(e),\n        keydown: e => this.inputKeyDown(e)\n      };\n    }\n\n    if (opts.css) {\n      this.instanceCss = Object.assign({}, opts.css);\n      this.cssInstance = () => this.instanceCss;\n    }\n    \n  }\n\n  // CSS that is local to this class\n  cssLocal() {\n    return [\n      {\n        input$c: {\n          marginLeft$px: 8\n        },\n        '.input input': {\n          padding$px: 2\n        },\n\n        '.input fieldset': {\n          border:          \"none\",\n          borderRadius$px: 3,\n          margin$px:       0,\n          padding$px:      [2,2,2,8]\n        },\n\n        '.inputLabel': {\n          display:    this.defaults.label.position == \"top\" ? \"block\" : \"inline-block\",\n          fontFamily: this.defaults.font.family,\n          fontSize:   this.defaults.font.size,\n          color:      this.defaults.color.textDark,\n          fontWeight: \"bold\",\n          minWidth$em:    7\n        },\n        \n        inputInner$c: {\n          display:    this.defaults.label.position == \"top\" ? \"block\" : \"inline-block\"\n        },\n        \n        completionList$c: {\n          display: \"table\",\n          position: \"absolute\",\n          padding$px: 0,\n          fontSize: '70%',\n          backgroundColor: \"#eee\",\n          \n        },\n\n        completionItem$c: {\n          padding$px: [2, 5],\n          border$px: [\"solid\", 1, jst.rgba(0,0,0,0.1)]\n        },\n\n        completionItem$c$hover: {\n          backgroundColor: \"#fff\",\n          cursor: \"pointer\"\n        },\n\n        selected$c: {\n          backgroundColor: \"#fff\",\n        },\n\n        bannerSelect$c: {\n          display: \"inline-block\"\n        },\n        \n        bannerSelectItem$c: {\n          display:     \"inline-block\",\n          fontSize$px: 13,\n          cursor: \"pointer\",\n          padding$px: [2, 10],\n          backgroundColor: \"#ccc\",\n          color: \"white\"\n        },\n        \n        '.bannerSelectItem:first-child': {\n          borderRadius$px: [8,0,0,8]\n        },\n        \n        '.bannerSelectItem:last-child': {\n          borderRadius$px: [0,8,8,0]\n        },\n        \n      },\n      this.localCss\n    ];\n  }\n\n  render() {\n    return [\n      this.renderInput(\n        jst.$input(\n          Object.assign(\n            {\n              type: this.opts.type ? this.opts.type : \"text\",\n              ref: \"inputEl\",\n            },\n            this.opts.attrs\n          )\n        ),\n        !this.completionValues ?\n          undefined :\n          jst.$div(\n            {cn: \"-completionList\"},\n            this.completionValues.map(item => \n                                           jst.$div({cn: \"-completionItem \" + (item.selected ? \"-selected\" : \"\"),\n                                                 events: {click: e => this.completionSelect(item, e)}},\n                                                item.text\n                                               )\n                                      )\n          )\n      )\n    ];\n  }\n\n  renderInput(...inners) {\n    return [\n      jst.$div(\n        {cn: \"-input --input\"},\n        jst.$fieldset(\n          this.opts.legend ? jst.$div({cn: '-inputLabel --inputLabel'}, this.opts.legend) : undefined,\n          this.opts.label  ? jst.$div({cn: '-inputLabel --inputLabel'}, this.opts.label) : undefined,\n          jst.$div(\n            {cn: \"-inputInner\"},\n            inners\n          )\n        )\n      )\n    ];\n  }\n\n  getValue() {\n    if (this.inputEl && this.inputEl.el) {\n      return this.inputEl.el.value;\n    }\n    return undefined;\n  }\n\n  inputKeyDown(e) {\n    if (e.key === \"ArrowDown\") {\n      if (this.completionValues) {\n        this.completionIndex = typeof(this.completionIndex) === \"undefined\" ? 0 :\n          this.completionIndex = (this.completionIndex + 1) %\n          this.completionValues.length;\n        this.markCompletionValue();\n      }\n    }\n    else if (e.key === \"ArrowUp\") {\n      if (this.completionValues) {\n        this.completionIndex = this.completionIndex ?\n          this.completionIndex - 1 : this.completionValues.length - 1;\n        this.markCompletionValue();\n      }\n    }\n    else if (e.key === \"Enter\") {\n      if (this.completionValues && this.completionValues.length && \n          typeof(this.completionIndex) !== \"undefined\") {\n        this.completionSelect(this.completionValues[this.completionIndex], e);\n      }\n      else {\n        if (this.opts.attrs.events.submit) {\n          this.opts.attrs.events.submit();\n        }\n      }\n    }\n\n    this.refresh();\n\n  }\n\n  setValue(val) {\n    if (this.inputEl && this.inputEl.el) {\n      this.inputEl.el.value = val;\n    }\n    this.inputEl.value = val;\n    this.completionValues = undefined;\n    this.refresh();\n  }\n\n  setCompletionValues(list) {\n    this.completionChoices = list.map(word => {return {text: word};});\n    this.doCompletion();\n  }\n\n  doCompletion() {\n    if (this.completionChoices) {\n      let curr = this.getValue() || \"\";\n      if (curr.length == 1) {\n        let re   = new RegExp(\"^\" + curr, \"i\");\n        this.completionValues = this.completionChoices.filter(\n          item => item.text && item.text.match(re));\n      }\n      else if (curr.length > 1) {\n        let re   = new RegExp(curr, \"i\");\n        this.completionValues = this.completionChoices.filter(\n          item => item.text && item.text.match(re));\n      }\n      else {\n        this.completionValues = [];\n      }\n      if (this.completionValues.length > 8) {\n        this.completionValues.splice(8);\n      }\n      this.refresh();\n    }\n  }\n\n  markCompletionValue() {\n    this.completionValues.map(item => item.selected = false);\n    this.completionValues[this.completionIndex].selected = true;\n  }\n\n  completionSelect(item, e) {\n    this.setValue(item.text);\n  }\n\n  inputChanged(e) {\n    this.doCompletion();\n  }\n\n  focus() {\n    if (this.inputEl && this.inputEl.el) {\n      this.inputEl.el.focus();\n    }\n  }\n  \n}\n\n\nclass InputRadioOrCheckbox extends Input {\n  constructor(form, opts) {\n    super(form, opts);\n  }\n\n  cssLocal() {\n    return [\n      super.cssLocal(),\n      {\n        itemLabel$c: {\n          margin$px: [0, 5]\n        },\n\n        input$c: {\n          marginLeft$px: 8\n        },\n      }\n    ];\n  }\n\n  render() {\n    return super.renderInput(\n      jst.$fieldset(\n        this.opts.legend ? jst.$legend(this.opts.legend) : undefined,\n        this.opts.label  ? jst.$legend(this.opts.label) : undefined,\n        this.opts.items.map(item => this.renderItem(this.opts.name, this.opts.events, item))\n      )\n    );\n  }\n\n  renderItem(name, events, item) {\n    return [\n      jst.$input(\n        {cn: \"-item --item\", type: this.opts.type, id: item.id, name: name, events: events}\n      ),\n      jst.$label(\n        {cn: \"-itemLabel --itemLabel\", for: item.id},\n        item.text || item.value\n      ),\n      item.noBreak ? undefined : jst.$br()\n    ];\n  }\n  \n}\n\n\nclass InputButton extends Input {\n  constructor(form, opts) {\n    super(form, opts);\n  }\n\n  cssLocal() {\n    return [\n      super.cssLocal(),\n      {\n        button$c: {\n          margin$px:       [0, 5],\n          padding$px:      4\n        },\n\n      }\n    ];\n  }\n\n  render() {\n    return super.renderInput(\n      jst.$fieldset(\n        this.opts.legend ? jst.$legend(this.opts.legend) : undefined,\n        this.opts.label  ? jst.$legend(this.opts.label) : undefined,\n        jst.$button(\n          Object.assign({cn: \"-button --button\"}, this.opts.attrs),\n          this.opts.value\n        )\n      )\n    );\n  }\n\n}\n\nclass InputTextArea extends Input {\n  constructor(form, opts) {\n    super(form, opts);\n  }\n\n  cssLocal() {\n    return [\n      super.cssLocal(),\n      {\n        textArea$c: {\n          margin$px: [0, 5]\n        },\n\n        input$c: {\n          marginLeft$px: 8\n        },\n      }\n    ];\n  }\n\n  render() {\n    return jst.$textarea(\n      Object.assign({cn: \"-textArea --textArea\"}, this.opts.attrs),\n      this.opts.value\n    );\n  }\n}\n\nclass InputSelect extends Input {\n  constructor(form, opts) {\n    super(form, opts);\n\n    if (this.opts.selectType === \"banner\") {\n      if (this.opts.events) {\n        this.bannerChange = this.opts.events.change;\n        this.bannerClick  = this.opts.events.click;\n        delete(this.opts.events);\n      }\n    }\n  }\n\n  cssLocal() {\n    return [\n      super.cssLocal(),\n      {\n        bannerSelect$c: {\n          display: \"inline-block\"\n        },\n        \n        bannerSelectItem$c: {\n          display:     \"inline-block\",\n          fontSize$px: 13,\n          cursor: \"pointer\",\n          padding$px: [2, 10],\n          backgroundColor: this.defaults.color.backgroundDark,\n          color: this.defaults.color.textLight\n        },\n        \n        bannerSelectItem$c$hover: {\n          backgroundColor: this.defaults.color.highlight,\n          color: this.defaults.color.textDark\n        },\n\n        selected$c: {\n          backgroundColor: this.defaults.color.highlight,\n          color: this.defaults.color.textDark\n        },\n        \n      }\n    ];\n  }\n\n  render() {\n    if (this.opts.selectType === \"banner\") {\n      return this.renderInput(\n        jst.$div(\n          {cn: \"-bannerSelect --bannerSelect\"},\n          this.opts.attrs,\n          this.opts.items ? this.opts.items.map(item => this.renderBannerSelectOption(this.opts.name, item)) : undefined\n        )\n      );\n    }\n    else {\n      return this.renderInput(\n        jst.$select(\n          this.opts.attrs,\n          this.opts.items ? this.opts.items.map(item => this.renderSelectOption(this.opts.name, item)) : undefined\n        )\n      );\n    }\n  }\n  \n  renderSelectOption(name, item) {\n    return [\n      jst.$option(\n        {cn: \"-selectItem\",\n         value: item.value || item.id || item.name,\n         properties: item.checked || item.selected ? [\"selected\"] : undefined\n        },\n        item.text || item.name || item.id || item.value\n      )\n    ];\n  }\n  \n  renderBannerSelectOption(name, item) {\n    return jst.$div(\n      {cn: \"-bannerSelectItem \" + (item.selected ? \"-selected\" : \"\"),\n       value: item.value || item.id || item.name,\n       events: {click: e => this.bannerItemSelect(item)}\n      },\n      item.text || item.name || item.id || item.value\n    );\n  }\n\n  getValue() {\n    if (this.opts.selectType === \"banner\") {\n      let selectedItem;\n      this.opts.items.map(item => {\n        if (item.selected) {\n          selectedItem = item;\n        }\n      });\n      return selectedItem.value || selectedItem.id || selectedItem.name;\n    }\n    else {\n      if (this.inputEl && this.inputEl.el) {\n        return this.inputEl.el.value;\n      }\n    }\n    return undefined;\n  }\n\n  bannerItemSelect(item) {\n    this.opts.items.map(item => item.selected = false);\n    item.selected = true;\n    this.refresh();\n    if (this.bannerClick) {\n      this.bannerClick(item);\n    }\n    if (this.bannerChange) {\n      this.bannerChange(item);\n    }\n  }\n\n  \n}\n\n\nexport class JstFormElement extends jst.Object {\n  constructor(opts) {\n    super();\n    // if (typeof(opts.name) == \"undefined\") {\n    //   throw Error(\"opts.name must be defined\");\n    // }\n    this.name         = opts.name;\n    this.events       = opts.events;\n    this.css          = opts.css || {};\n    this.inputs       = [];\n    this.inputsByName = {};\n\n    this.createInputs(opts.inputs);\n    \n  }\n\n  // If you decide to just render the form, then\n  // it will simply render all the inputs in order\n  render() {\n    return jst.$form(\n      {name: this.name, events: this.events},\n      this.inputs\n    );\n  }\n\n  createInput(opts) {\n    if (typeof(opts.name) == \"undefined\") {\n      throw Error(\"opts.name must be defined on all inputs\");\n    }\n    let optsWithRef = Object.assign({ref: \"inputEl\"}, opts);\n    let input = new Input(this, optsWithRef, this.css);\n    this.inputs.push(input);\n    this.inputsByName[opts.name] = input;\n    return input;\n  }\n\n  createInputs(inputs) {\n    if (inputs && inputs.length) {\n      inputs.map(input => this.createInput(input));\n    }\n  }\n\n  getValues() {\n    let vals = {};\n    for (let name of Object.keys(this.inputsByName)) {\n      vals[name] = this.inputsByName[name].getValue();\n    }\n    return vals;\n  }\n  \n}\n\nconst typeToClass = {\n  select:   InputSelect,\n  checkbox: InputRadioOrCheckbox,\n  radio:    InputRadioOrCheckbox,\n  textarea: InputTextArea,\n  button:   InputButton,\n  color:    Input,\n  date:     Input,\n  datetime: Input,\n  email:    Input,\n  file:     Input,\n  hidden:   Input,\n  image:    Input,\n  month:    Input,\n  number:   Input,\n  password: Input,\n  radio:    Input,\n  range:    Input,\n  reset:    Input,\n  search:   Input,\n  submit:   InputButton,\n  tel:      Input,\n  text:     Input,\n  time:     Input,\n  url:      Input,\n  week:     Input\n};\n"]}